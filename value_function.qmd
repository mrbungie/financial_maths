# Value Function

## Introduction

So far, we've learned to describe cashflows as discrete events (money at specific times). But to truly understand the **financial state** of a project or investment at *any* point in time, we need a continuous view. This is where the **value function** comes in.

::: {.callout-tip icon="true"}
## Intuition: From Snapshots to a Movie

-   **Cashflow table**: Snapshots at specific moments
-   **Value function**: A continuous movie showing your financial position over time

Think of it as tracking your "net worth from this investment" at every instant, not just when money moves.
:::

## The Core Concept

::: {.callout-note icon="true"}
## Definition: Value Function

The **value function** $V(t)$ represents the monetary value of a cashflow stream at time $t$, accounting for all past and future cashflows, adjusted for the time value of money.

$$
V(t) = \text{value at time } t \text{ of everything that has happened and will happen}
$$
:::

### Two Perspectives on $V(t)$

1.  **Backward-looking**: What happened before $t$, accumulated to time $t$
2.  **Forward-looking**: What will happen after $t$, discounted to time $t$

## Simple Example: Building Intuition

Let's start with a simple 2-period investment:

-   **t = 0**: Invest \$100 (outflow)
-   **t = 1**: Receive \$50 (inflow)
-   **t = 2**: Receive \$60 (inflow)
-   **Interest rate**: 5% per period

### What Is the Value Function?

Let's calculate $V(t)$ at different points:

#### $V(0)$: Value at the Start

At $t=0$, we can compute value by discounting all future cashflows:

$$
V(0) = -100 + \frac{50}{1.05} + \frac{60}{(1.05)^2} = -100 + 47.62 + 54.42 = 2.04
$$

**Interpretation**: At the moment of investment, this project is worth $2.04$ (it's a good deal—positive NPV!).

#### $V(1)$: Value After One Period

At $t=1$, we've invested \$100 and earned 5% interest for one year, plus we receive the $50$ cashflow:

$$
V(1) = -100 \times 1.05 + 50 = -105 + 50 = -55
$$

But we still have the future \$60 coming:

$$
V(1) = -55 + \frac{60}{1.05} = -55 + 57.14 = 2.14
$$

**Interpretation**: At $t=1$, accounting for what's happened and what's coming, we're worth $2.14$.

#### $V(2)$: Value at the End

$$
V(2) = (-100 \times 1.05 + 50) \times 1.05 + 60 = -55 \times 1.05 + 60 = -57.75 + 60 = 2.25
$$

**Interpretation**: At the end, all cashflows have been realized and accumulated to $t=2$.

### Value Function Graph

```{=latex}
\begin{figure}[h]
\centering
\begin{tikzpicture}[scale=1.3]
% Axes
\draw[->] (-0.5,0) -- (9,0) node[right] {Time};
\draw[->] (0,-0.5) -- (0,3.5) node[above] {$V(t)$ (\$)};

% Y-axis labels
\foreach \y/\label in {0/0, 1/1, 2/2, 3/3}
    \draw (-0.1,\y) -- (0.1,\y) node[left=3pt] {\label};

% Time labels
\foreach \x/\label in {0/0, 3/1, 6/2}
    \draw (\x,0.1) -- (\x,-0.1) node[below] {$t=\label$};

% Value function (smooth curve through calculated points)
% All values are around 2, staying positive throughout
\draw[thick,blue] (0,2.04) -- (3,2.14) -- (6,2.25);

% Value points
\fill[blue] (0,2.04) circle (2pt) node[above right] {$V(0)=2.04$};
\fill[blue] (3,2.14) circle (2pt) node[above right] {$V(1)=2.14$};
\fill[blue] (6,2.25) circle (2pt) node[above right] {$V(2)=2.25$};

% Cashflow arrows (showing direction only, positioned away from line)
\draw[->,red,very thick] (0,3) -- (0,2.6);
\node[above,red] at (0,3.2) {−\$100 invested};

\draw[->,green!60!black,very thick] (3,1.5) -- (3,1.9);
\node[below,green!60!black] at (3,1.3) {+\$50 received};

\draw[->,green!60!black,very thick] (6,1.6) -- (6,2.0);
\node[below,green!60!black] at (6,1.4) {+\$60 received};

% Zero line
\draw[dashed,gray,thick] (-0.5,0) -- (9,0);
\node[right,gray] at (9,0) {Break-even};
\end{tikzpicture}
\end{figure}
```

::: {.callout-tip icon="true"}
## Reading the Graph

-   **The value function stays POSITIVE throughout** — this is a good project (NPV > 0)!
-   **It increases slightly over time** from \$2.04 → \$2.14 → \$2.25 (about 5\% growth)
-   The **height** at any point shows the NPV evaluated at that moment in time
-   Even though we invest \$100 upfront, the discounted future cashflows make the project worthwhile
-   The small increase reflects the 5\% interest rate compounding the NPV forward
:::

## The Value Function Formula

::: {.callout-important icon="true"}
## Key Formula: Value Function

For a cashflow stream with payments $C_0, C_1, ..., C_n$ at times $t_0, t_1, ..., t_n$:

$$
V(t) = \sum_{t_i \leq t} C_i \cdot (1+i)^{t-t_i} + \sum_{t_j > t} \frac{C_j}{(1+i)^{t_j - t}}
$$

Where: - First sum: Past cashflows accumulated forward to time $t$ - Second sum: Future cashflows discounted back to time $t$ - $i$ = interest rate per period
:::

**In words**: \> Value at time $t$ = (Everything before $t$, grown with interest) + (Everything after $t$, discounted)

## Multi-Period Decomposition

Let's see how $V(t)$ evolves period by period for a more complex example.

### Example: 4-Year Investment

**Cashflows**: - $t=0$: −\$1,000 - $t=1$: +\$200 - $t=2$: +\$300 - $t=3$: +\$400 - $t=4$: +\$500

**Interest rate**: 8% per year

### Step-by-Step Accumulation

| Period | Opening Balance | Interest Earned | Cashflow | Closing Balance |
|--------|-----------------|-----------------|----------|-----------------|
| 0 → 1  | −1,000          | −80             | +200     | −880            |
| 1 → 2  | −880            | −70.40          | +300     | −650.40         |
| 2 → 3  | −650.40         | −52.03          | +400     | −302.43         |
| 3 → 4  | −302.43         | −24.19          | +500     | +173.38         |

**Interpretation**: - We're "in the hole" (negative) through year 3 - Interest accumulates on our negative balance (making it more negative) - Finally, by year 4, we're positive: **+\$173.38**

### Cumulative Cashflow Graph

```{=latex}
\begin{figure}[h]
\centering
\begin{tikzpicture}[scale=1.0]
% Axes
\draw[->] (-0.5,0) -- (13,0) node[right] {Time (years)};
\draw[->] (0,-5) -- (0,3) node[above] {Value (\$)};

% Grid lines
\foreach \y in {-1000,-800,-600,-400,-200,0,200}
    \draw[gray,very thin] (0,\y/200) -- (12,\y/200);

% Y-axis labels
\foreach \y/\label in {-1000/-1000,-500/-500,0/0,200/+200}
    \node[left] at (-0.2,\y/200) {\label};

% Time markers
\foreach \x/\label in {0/0, 3/1, 6/2, 9/3, 12/4}
    \draw (\x,0.1) -- (\x,-0.1) node[below] {\label};

% Value function (staircase with smooth curves for interest periods)
\draw[thick,blue,->] (0,-5) -- (0.1,-5);
\draw[thick,blue] (0.1,-5) .. controls (1.5,-4.6) .. (3,-4.4);
\draw[thick,blue] (3,-4.4) .. controls (4.5,-3.5) .. (6,-3.25);
\draw[thick,blue] (6,-3.25) .. controls (7.5,-1.8) .. (9,-1.51);
\draw[thick,blue] (9,-1.51) .. controls (10.5,0.3) .. (12,0.87);

% Value points
\fill[blue] (0,-5) circle (2pt);
\fill[blue] (3,-4.4) circle (2pt) node[right,font=\small] {−880};
\fill[blue] (6,-3.25) circle (2pt) node[right,font=\small] {−650};
\fill[blue] (9,-1.51) circle (2pt) node[right,font=\small] {−302};
\fill[blue] (12,0.87) circle (2pt) node[right,font=\small] {+173};

% Zero reference line
\draw[dashed,thick,gray] (-0.5,0) -- (13,0);

% Shading
\fill[red!10,opacity=0.5] (0,0) -- (0,-5) .. controls (1.5,-4.6) .. (3,-4.4) .. controls (4.5,-3.5) .. (6,-3.25) .. controls (7.5,-1.8) .. (9,-1.51) -- (9,0) -- cycle;
\fill[green!10,opacity=0.5] (9,0) .. controls (10.5,0.3) .. (12,0.87) -- (12,0) -- cycle;

% Labels
\node[red,font=\bfseries] at (4.5,-5.5) {Negative Territory (in debt)};
\node[green!50!black,font=\bfseries] at (10.5,1.5) {Positive (profit)};
\end{tikzpicture}
\end{figure}
```

::: {.callout-tip icon="true"}
## The "Smoothed Story" Interpretation

The value function $V(t)$ tells a **smoothed story**:

-   Not just "when does money move?" (discrete cashflows)
-   But "what is my financial state at every moment?" (continuous value)
-   It accounts for **interest accumulation** between cashflows
-   The curves between jumps show interest working on your balance
:::

## Net Present Value (NPV)

The value at time zero, $V(0)$, has a special name:

::: {.callout-note icon="true"}
## Definition: Net Present Value

The **Net Present Value (NPV)** is the value function evaluated at $t=0$:

$$
\text{NPV} = V(0) = \sum_{i=0}^{n} \frac{C_i}{(1+r)^{t_i}}
$$

It represents the "today value" of the entire cashflow stream.
:::

### Decision Rule

::: {.callout-important icon="true"}
## NPV Decision Rule

-   **NPV \> 0**: Project adds value → **Accept**
-   **NPV = 0**: Project is break-even → **Indifferent**
-   **NPV \< 0**: Project destroys value → **Reject**
:::

### Example: Should We Accept This Investment?

**Investment opportunity**: - Initial cost: \$5,000 - Year 1 return: \$2,000 - Year 2 return: \$2,500 - Year 3 return: \$1,800 - Discount rate: 10%

**Calculate NPV**:
$$
\begin{aligned}
\text{NPV} &= -5000 + \frac{2000}{1.10} + \frac{2500}{1.10^2} + \frac{1800}{1.10^3} \\
&= -5000 + 1818.18 + 2066.12 + 1352.42 \\
&= 236.72
\end{aligned}
$$

**Decision**: **Accept!** NPV = $236.72$ \> 0, so the project adds value.

## Value Function Properties

### Property 1: Additivity

If you have two independent cashflow streams $A$ and $B$:

$$
V_{A+B}(t) = V_A(t) + V_B(t)
$$

You can value them separately and add the results.

### Property 2: Time Consistency

The value function satisfies:

$$
V(t_2) = V(t_1) \cdot (1+i)^{t_2-t_1} + \sum_{t_1 < t_i \leq t_2} C_i \cdot (1+i)^{t_2-t_i}
$$

**Interpretation**: Value at $t_2$ = (Value at $t_1$ grown with interest) + (Cashflows in between, accumulated)

### Property 3: Boundary Conditions

-   **At start**: $V(0)$ = NPV
-   **At end**: $V(T)$ = all cashflows accumulated to final time

## Practical Applications

### 1. Project Monitoring

Track $V(t)$ over time to see if your project is on track:

```{=latex}
\begin{figure}[h]
\centering
\begin{tikzpicture}[scale=1.0]
% Axes
\draw[->] (0,0) -- (10,0) node[right] {Time};
\draw[->] (0,-2) -- (0,3) node[above] {Value};

% Planned trajectory
\draw[thick,blue,dashed] (0,0.5) -- (2,-0.5) -- (4,0.2) -- (6,1) -- (8,1.6) -- (10,2);
\node[blue] at (10,2.5) {Planned $V(t)$};

% Actual trajectory
\draw[thick,red] (0,0.5) -- (2,-0.3) -- (4,0.4) -- (6,1.2) -- (8,1.9);
\node[red] at (8,2.5) {Actual $V(t)$};

% Current time
\draw[thick,dashed] (8,-2) -- (8,3);
\node[below] at (8,-2) {Today};

% Annotation
\node[green!50!black,font=\small] at (7,1.5) {Ahead of plan! ✓};
\end{tikzpicture}
\end{figure}
```

If actual $V(t)$ \> planned $V(t)$, you're ahead of schedule!

### 2. Comparing Investments

Two projects with different cashflow patterns:

| Time | Project A | Project B |
|------|-----------|-----------|
| 0    | −1,000    | −1,000    |
| 1    | +1,200    | 0         |
| 2    | 0         | +1,300    |

**At 10% discount rate**: - $\text{NPV}_A = -1000 + 1200/1.10 = 90.91$ - $\text{NPV}_B = -1000 + 1300/1.10^2 = 74.38$

**Conclusion**: Project A is better (higher NPV).

## Summary

✅ **Value function** $V(t)$ = financial position at any time $t$\
✅ **Combines** past (accumulated) and future (discounted) cashflows\
✅ **NPV** = $V(0)$ = value at the start\
✅ **Decision rule**: Accept if NPV \> 0\
✅ **Tells a story**: Smoothed continuous view of wealth over time\
✅ **Practical use**: Monitor projects, compare investments

::: {.callout-important icon="true"}
## Key Insight

The value function transforms **discrete cashflows** (jumps) into a **continuous financial narrative** (smooth story). It's the "bank account balance" of the investment at every moment.
:::

------------------------------------------------------------------------

**Next**: In [Chapter 4: Interest & Discount Rates](interest_rates.qmd), we'll dive deep into how interest rates drive the time value of money.